server {
    listen 80;
    
    # 1. Serve Static Assets (React App)
    location / {
        root /usr/share/nginx/html;
        index index.html index.htm;
        try_files $uri $uri/ /index.html;
    }

    # 2. API Proxies (Mirroring vite.config.ts)
    
    # Nongsaro
    location /api/nongsaro/ {
        proxy_pass http://api.nongsaro.go.kr/;
        proxy_set_header Host api.nongsaro.go.kr;
        proxy_set_header Origin http://api.nongsaro.go.kr;
    }

    # NCPMS
    location /api/ncpms/ {
        proxy_pass https://ncpms.rda.go.kr/;
        proxy_ssl_server_name on;
        proxy_set_header Host ncpms.rda.go.kr;
    }

    # Public Data Portal
    location /api/public/ {
        proxy_pass http://apis.data.go.kr/;
        proxy_set_header Host apis.data.go.kr;
    }

    # Garak Market
    location /api/garak/ {
        proxy_pass http://www.garak.co.kr/;
        proxy_set_header Host www.garak.co.kr;
        proxy_set_header Origin http://www.garak.co.kr;
        proxy_set_header Accept-Encoding "";
    }
}
